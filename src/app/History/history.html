<div class="history-page">
  <h2>Transaction History</h2>

  @if (errorMessage) {
    <div class="alert alert-error">{{ errorMessage }}</div>
  }

  @if (loading) {
    <p>Loading...</p>
  } @else {
    <div class="table-wrap">
      <table class="history-table">
        <thead>
          <tr>
            <th>Date</th>
            <th>Type</th>
            <th>Amount</th>
            <th>Status</th>
          </tr>
        </thead>
        <tbody>
          @for (row of rows; track row.raw.id) {
            <tr>
              <td>{{ row.date }}</td>
              <td>
                <span class="type-badge" [class.type-debit]="row.type === 'DEBIT'" [class.type-credit]="row.type === 'CREDIT'">
                  {{ row.type }}
                </span>
              </td>
              <td class="amount">{{ row.amount | number:'1.2-2' }}</td>
              <td>
                <span class="status-badge" [class.status-success]="row.status === 'SUCCESS'" [class.status-failed]="row.status === 'FAILED'">
                  {{ row.status }}
                </span>
              </td>
            </tr>
          } @empty {
            <tr>
              <td colspan="4" class="empty">No transactions found.</td>
            </tr>
          }
        </tbody>
      </table>
    </div>

    <button type="button" class="btn btn-outline" routerLink="/dashboard">Back to Dashboard</button>
  }
</div>
